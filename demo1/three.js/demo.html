<!DOCTYPE html>
<html lang="en">

<head>
    <title>智能建筑安全生产监管平台</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/main.css">
    <!-- <link rel="stylesheet" href="css/comon0.css"> -->
    <script src="js/inflate.min.js"></script>
    <script src="js/three.js"></script>
    <script src="js/stats.min.js"></script>
    <script src="js/dat.gui.min.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/OBJLoader.js"></script>
    <script src="js/FBXLoader.js"></script>
    <script src="js/EffectComposer.js"></script>
    <script src="js/RenderPass.js"></script>
    <script src="js/ShaderPass.js"></script>
    <script src="js/OutlinePass.js"></script>
    <script src="js/FXAAShader.js"></script>
    <script src="js/CopyShader.js"></script>
    <script src="../js/echarts.min.js"></script>
    <audio id="bgMusic" src="jingbaomusic.mp3" loop="loop"></audio>
</head>

<body>
    <div id="plan"><img class="jingbao" src="../three.js/img/jingbao.png" style="width:200px; height:200px;">
        <p id="ljcl">警报!3号楼塔吊链接处有松动危险，请立即处理!</p>
    </div>

    <div class="tixing">
        <h1 style="font-size: 30px;">湘潭大学艺术大楼一期项目建设 </h1>
        <div id="first"><a href="..//index2.html"><img src="img/first.png" alt="" style="width: 30px;height: 30px;"></a></div>
        <div id="mytime"></div>
        <div id="weather"><iframe allowtransparency="true" frameborder="0" width="317" height="28" scrolling="no"
                src="//tianqi.2345.com/plugin/widget/index.htm?s=3&z=1&t=1&v=0&d=1&bd=0&k=000000&f=ffffff&ltf=ffffff&htf=ff0000&q=1&e=0&a=0&c=57773&w=317&h=28&align=center"></iframe>
        </div>
        <div class="daohang"> <a id="yujingyanshi" style="margin-right: 50px;" >预警演示</a> <a href="">欢迎您，张军</a></div>

    </div>
    <div class="yujing">
        <div class="yujingguanli">
            <p class="alltitle">报警信息 <span>
                    <ul>
                        <img src="../three.js/img/jikeng.png" style="width: 20px;height: 20px; ">
                        <li>
                            <p>基坑</p>
                            <p style="color: #fc541a;font-size: 20px; padding-left:42px;">0</p>条
                        </li>
                    </ul>

        </div>
        <div class="yujingguanli">

            <ul>
                <img src="../three.js/img/tadiao.png" style="width: 20px;height: 20px; ">
                <li>
                    <p>塔吊</p>
                    <p style="color: #fc541a;font-size: 20px; padding-left:42px;">0</p>条
                </li>
            </ul>

        </div>
        <div class="yujingguanli">

            <ul>
                <img src="../three.js/img/gaozhimo.png" style="width: 20px;height: 20px; ">
                <li>
                    <p>高支模</p>
                    <p style="color: #fc541a;font-size: 20px; padding-left:30px;">0</p>条
                </li>
            </ul>

        </div>
        <div class="yujingguanli">

            <ul>
                <img src="../three.js/img/anquanmao.png" style="width: 20px;height: 20px; ">
                <li>
                    <p>安全帽</p>
                    <p style="color: #fc541a;font-size: 20px; padding-left:30px;">3</p>条
                </li>
            </ul>

        </div>


    </div>
    <div id="main1f">
        <p class="alltitle">环境检测 </p>
        <div id="main1"></div>
    </div>
    <div id="main2f">
        <p class="alltitle">本周隐患统计 </p>
        <div id="main2"></div>
    </div>
    <div id="main3f">
        <p class="alltitle">行为分析 </p>
        <div id="main3">
        </div>
        <div id="main4f">
            <p class="alltitle">安全评分 </p>
            <div id="main4">
                <div class="wenzi1">
                    <div id="zb1"></div>
                    <p>系统评分</p>
                </div>
                <div class="wenzi1">
                    <div id="zb2"></div>
                    <p>处理事件</p>
                </div>

            </div>
        </div>

        <script>

            var container, stats, outlinePass, controls;
            var camera, scene, renderer, renderPass, composer, outlinePass2, composer2, array = [], light, mixer2;

            var clock = new THREE.Clock();
            var mouse = new THREE.Vector2();
            var mixer;
            var selectedObjects = [];
            var raycaster = new THREE.Raycaster();
            
            var texturex = new THREE.TextureLoader().load('models/fbx/jingbao.png');
                // 创建精灵材质对象SpriteMaterial
                var spriteMaterialx = new THREE.SpriteMaterial({
                    // color: 0xff00ff,//设置精灵矩形区域颜色
                    //rotation: Math.PI / 4,旋转精灵对象45度，弧度值
                    map: texturex,//设置精灵纹理贴图
                });
                // 创建精灵模型对象，不需要几何体geometry参数
                var spritxex = new THREE.Sprite(spriteMaterialx);
               
                // 控制精灵大小，比如可视化中精灵大小表征数据大小
                spritxex.scale.set(100, 100, 1); //// 只需要设置x、y两个分量就可
                spritxex.position.set(-320, 1300, 430);


            document.getElementById("ljcl").onclick = function () {
                document.getElementById("plan").style.display = "none";
                document.getElementById("bgMusic").pause();
                scene.add(spritxex);
                array.push(spritxex);
                scene.traverse(function (obj) {
                    if (obj.name === "syr") {
                        console.log(obj);
                        array.push(obj);
                    }
                })
                
                 
                var group = new THREE.Group();
              
                window.addEventListener('click', onMouseClick);
                    function onMouseClick(event) {

                        var x, y;

                        if (event.changedTouches) {

                            x = event.changedTouches[0].pageX;
                            y = event.changedTouches[0].pageY;

                        } else {

                            x = event.clientX;
                            y = event.clientY;

                        }

                        mouse.x = (x / window.innerWidth) * 2 - 1;
                        mouse.y = - (y / window.innerHeight) * 2 + 1;

                        checkIntersection();

                    }
                   
                    function addSelectedObject(object) {

                        selectedObjects = [];
                        selectedObjects.push(object);

                    }

                    function checkIntersection(object) {

                        raycaster.setFromCamera(mouse, camera);

                        var intersects = raycaster.intersectObjects([scene], true);
                        if(intersects.length>0){

                            if (intersects[0].object.name == "syr") {
                                
                                
                                window.location.href="son.html";
                            }    

                        }

                    }

            }
            document.getElementById("yujingyanshi").onclick = function () {
                document.getElementById("plan").style.display = "flex";
                document.getElementById("bgMusic").play();
             
            }
            init();
            animate();

            function init() {


                container = document.createElement('div');
                document.body.appendChild(container);

                camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 6000);
                camera.position.set(1500, 2000, 1800);
                this.camera.lookAt(0, 0, 0);

                scene = new THREE.Scene();
                // scene.background = new THREE.Color( 0xa0a0a0 );
                // scene.fog = new THREE.Fog( 0xa0a0a0, 200, 1000 );




                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.shadowMap.enabled = true;
                container.appendChild(renderer.domElement);

                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.target.set(0, 500, 0);
                controls.update();
                controls.enableDamping = true;
                controls.dampingFactor = 0.5;
                controls.minDistance = 0;
                controls.maxDistance = 4000;
                controls.maxPolarAngle = Math.PI / 2;


                var texture = new THREE.TextureLoader().load('models/fbx/1haolou.png');
                // 创建精灵材质对象SpriteMaterial
                var spriteMaterial = new THREE.SpriteMaterial({
                    // color: 0xff00ff,//设置精灵矩形区域颜色
                    //rotation: Math.PI / 4,旋转精灵对象45度，弧度值
                    map: texture,//设置精灵纹理贴图
                });
                // 创建精灵模型对象，不需要几何体geometry参数
                var sprite = new THREE.Sprite(spriteMaterial);
                scene.add(sprite);
                // 控制精灵大小，比如可视化中精灵大小表征数据大小
                sprite.scale.set(100, 60, 1); //// 只需要设置x、y两个分量就可
                sprite.position.set(240, 1000, 500);
                
                



                
                
                

                var texture2 = new THREE.TextureLoader().load('models/fbx/2haolou.png');
                // 创建精灵材质对象SpriteMaterial
                var spriteMaterial2 = new THREE.SpriteMaterial({
                    // color: 0xff00ff,//设置精灵矩形区域颜色
                    //rotation: Math.PI / 4,旋转精灵对象45度，弧度值
                    map: texture2,//设置精灵纹理贴图
                });
                // 创建精灵模型对象，不需要几何体geometry参数
                var sprite2 = new THREE.Sprite(spriteMaterial2);
                scene.add(sprite2);
                // 控制精灵大小，比如可视化中精灵大小表征数据大小
                sprite2.scale.set(100, 60, 1); //// 只需要设置x、y两个分量就可
                sprite2.position.set(240, 1000, -500);


                



                var texture3 = new THREE.TextureLoader().load('models/fbx/3haolou.png');
                // 创建精灵材质对象SpriteMaterial
                var spriteMaterial3 = new THREE.SpriteMaterial({
                    // color: 0xff00ff,//设置精灵矩形区域颜色
                    //rotation: Math.PI / 4,旋转精灵对象45度，弧度值
                    map: texture3,//设置精灵纹理贴图
                });
                // 创建精灵模型对象，不需要几何体geometry参数
                var sprite3 = new THREE.Sprite(spriteMaterial3);
                scene.add(sprite3);
                // 控制精灵大小，比如可视化中精灵大小表征数据大小
                sprite3.scale.set(100, 60, 1); //// 只需要设置x、y两个分量就可
                sprite3.position.set(-420, 1000, 600);

                var texture4 = new THREE.TextureLoader().load('models/fbx/4haolou.png');
                // 创建精灵材质对象SpriteMaterial
                var spriteMaterial4 = new THREE.SpriteMaterial({
                    // color: 0xff00ff,//设置精灵矩形区域颜色
                    //rotation: Math.PI / 4,旋转精灵对象45度，弧度值
                    map: texture4,//设置精灵纹理贴图
                });
                // 创建精灵模型对象，不需要几何体geometry参数
                var sprite4 = new THREE.Sprite(spriteMaterial4);
                scene.add(sprite4);
                // 控制精灵大小，比如可视化中精灵大小表征数据大小
                sprite4.scale.set(100, 60, 1); //// 只需要设置x、y两个分量就可
                sprite4.position.set(-420, 1000, -400);




                let ambient = new THREE.AmbientLight(0xffffff, 1); //AmbientLight,影响整个场景的光源
                ambient.position.set(0, 0, 0);
                scene.add(ambient);
                //添加平行光,平行光类似于太阳光
                let directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);//模拟远处类似太阳的光源
                directionalLight.position.set(0, 1000, 0);
                scene.add(directionalLight);
                //设置点光源
                let pointLight1 = new THREE.PointLight(0xffffff, 0.8);
                pointLight1.position.set(0, 0, 0);
                scene.add(pointLight1);

                var pointColor = "#ffffff";
                let spotLight = new THREE.SpotLight(pointColor);
                spotLight.position.set(400, 800, 500);
                spotLight.castShadow = true;
                spotLight.shadowCameraNear = 2;
                spotLight.shadowCameraFar = 800;
                spotLight.shadowCameraFov = 30;

                // spotLight.target = plane;//光照照向地面
                spotLight.distance = 0;
                spotLight.angle = 0.4;
                scene.add(spotLight);


                // var cube = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 100),
                //     new THREE.MeshBasicMaterial({ color: 0xff0000 }));
                // cube.name = "syrplan";
                // cube.position.set(400, 1000, 500);
                // scene.add(cube);



                outlinePass = new THREE.OutlinePass(new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);
                outlinePass.edgeStrength = 10;//包围线浓度
                outlinePass.edgeGlow = 0.8;//边缘线范围
                outlinePass.edgeThickness = 1;//边缘线浓度
                outlinePass.pulsePeriod = 2;//包围线闪烁评率
                outlinePass.visibleEdgeColor.set('#11264f');//包围线颜色
                outlinePass.hiddenEdgeColor.set('#190a05');//被遮挡的边界线颜色

                renderPass = new THREE.RenderPass(scene, camera);
                composer = new THREE.EffectComposer(renderer);
                composer.addPass(renderPass);
                composer.addPass(outlinePass);
                // array.push(cube);


                outlinePass.selectedObjects = array;


                var loader1 = new THREE.FBXLoader();
                loader1.load('models/014.fbx', function (object) {
                    object.name = "fangzi";
                    // console.log(object.name);
                    // object.material.opacity =0.9;
                    // object.material.transparent = true;//材质深度为none,就是不遮挡
                    // core.material.depthWrite = false;
                    // // core.material.emissive="#190a05";
                    // console.log("ss" + core.toJSON());
                    // object.rotateY(Math.PI / -3.5);

                    mixer = new THREE.AnimationMixer(object);

                    var action2 = mixer.clipAction(object.animations[0]);
                    // action2.play();

                    object.traverse(function (child) {

                        if (child.isMesh) {

                            child.castShadow = true;
                            child.receiveShadow = true;
                            child.name="ssyr"
                        }

                    });
                    // object.scale.set(0.6, 0.6, 0.6);
                    // object.position.set(100, -510, 500);
                    // object.rotateY(Math.PI / 1.5    );
                    scene.add(object);

                });
               
                var loadero = new THREE.OBJLoader();//在init函数中，创建loader变量，用于导入模型
                loadero.load('models/tadiao.obj', function (obj) {//第一个表示模型路径，第二个表示完成导入后的回调函数，一般我们需要在这个回调函数中将导入的模型添加到场景中

                    var material = new THREE.MeshLambertMaterial({ color: 0xc05600, transparent: true, opacity: 1 });
                    obj.children.forEach(function (child) {
                        //给每个子元素赋值纹理
                        child.material = material;
                        //更新每个子元素的面和顶点的法向量
                        child.geometry.computeFaceNormals();
                        child.geometry.computeVertexNormals();
                        child.name="syr"
                    });
                    
                    scene.add(obj);//将导入的模型添加到场景中
                    
                    
                });

                    window.addEventListener('resize', onWindowResize, false);

                    // window.addEventListener( 'mousemove', onTouchMove );
                   
                    renderer.setClearColor(0x000080, 0.3);
                    window.onload = function () {

                    outlinePass.selectedObjects = array;
                    myfun1();
                    myfun2();
                    mytime();
                    myfun3();
                    zb1(); zb2();

                }
                    // 坐标
                    // let axes = new THREE.AxisHelper(1500);
                    // axes.position.set(0, 0, 0);
                    // scene.add(axes);


                    window.addEventListener('resize', onWindowResize, false);

                    // // stats
                    // stats = new Stats();
                    // container.appendChild(stats.dom);

                }

            function onWindowResize() {

                        camera.aspect = window.innerWidth / window.innerHeight;
                        camera.updateProjectionMatrix();

                        renderer.setSize(window.innerWidth, window.innerHeight);

                    }
            function mytime() {
                        var t = null;
                        t = setTimeout(mytime, 1000);//開始运行
                        clearTimeout(t);//清除定时器
                        dt = new Date();
                        var y = dt.getFullYear();
                        var mt = dt.getMonth() + 1;
                        var day = dt.getDate();
                        var h = dt.getHours();//获取时
                        var m = dt.getMinutes();//获取分
                        var s = dt.getSeconds();//获取秒
                        document.getElementById("mytime").innerHTML = y + "年" + mt + "月" + day + "日" + h + "时" + m + "分" + s + "秒";
                        t = setTimeout(mytime, 1000); //设定定时器，循环运行

                    }
            function myfun1() {
                        var chartDom = document.getElementById('main1');
                        var myChart = echarts.init(chartDom);
                        var option;

                        // Schema:
                        // date,AQIindex,PM2.5,PM10,CO,NO2,SO2
                        var dataBJ = [
                            [55, 9, 56, 0.46, 18, 6, 1],
                            [25, 11, 21, 0.65, 34, 9, 2],
                            [56, 7, 63, 0.3, 14, 5, 3],
                            [33, 7, 29, 0.33, 16, 6, 4],
                            [42, 24, 44, 0.76, 40, 16, 5],
                            [82, 58, 90, 1.77, 68, 33, 6],
                            [74, 49, 77, 1.46, 48, 27, 7],
                            [78, 55, 80, 1.29, 59, 29, 8],
                            [267, 216, 280, 4.8, 108, 64, 9],
                            [185, 127, 216, 2.52, 61, 27, 10],
                            [39, 19, 38, 0.57, 31, 15, 11],
                            [41, 11, 40, 0.43, 21, 7, 12],
                            [64, 38, 74, 1.04, 46, 22, 13],
                            [108, 79, 120, 1.7, 75, 41, 14],
                            [108, 63, 116, 1.48, 44, 26, 15],
                            [33, 6, 29, 0.34, 13, 5, 16],
                            [94, 66, 110, 1.54, 62, 31, 17],
                            [186, 142, 192, 3.88, 93, 79, 18],
                            [57, 31, 54, 0.96, 32, 14, 19],
                            [22, 8, 17, 0.48, 23, 10, 20],
                            [39, 15, 36, 0.61, 29, 13, 21],
                            [94, 69, 114, 2.08, 73, 39, 22],
                            [99, 73, 110, 2.43, 76, 48, 23],
                            [31, 12, 30, 0.5, 32, 16, 24],
                            [42, 27, 43, 1, 53, 22, 25],
                            [154, 117, 157, 3.05, 92, 58, 26],
                            [234, 185, 230, 4.09, 123, 69, 27],
                            [160, 120, 186, 2.77, 91, 50, 28],
                            [134, 96, 165, 2.76, 83, 41, 29],
                            [52, 24, 60, 1.03, 50, 21, 30],
                            [46, 5, 49, 0.28, 10, 6, 31]
                        ];

                        var dataGZ = [
                            [26, 37, 27, 1.163, 27, 13, 1],
                            [85, 62, 71, 1.195, 60, 8, 2],
                            [78, 38, 74, 1.363, 37, 7, 3],
                            [21, 21, 36, 0.634, 40, 9, 4],
                            [41, 42, 46, 0.915, 81, 13, 5],
                            [56, 52, 69, 1.067, 92, 16, 6],
                            [64, 30, 28, 0.924, 51, 2, 7],
                            [55, 48, 74, 1.236, 75, 26, 8],
                            [76, 85, 113, 1.237, 114, 27, 9],
                            [91, 81, 104, 1.041, 56, 40, 10],
                            [84, 39, 60, 0.964, 25, 11, 11],
                            [64, 51, 101, 0.862, 58, 23, 12],
                            [70, 69, 120, 1.198, 65, 36, 13],
                            [77, 105, 178, 2.549, 64, 16, 14],
                            [109, 68, 87, 0.996, 74, 29, 15],
                            [73, 68, 97, 0.905, 51, 34, 16],
                            [54, 27, 47, 0.592, 53, 12, 17],
                            [51, 61, 97, 0.811, 65, 19, 18],
                            [91, 71, 121, 1.374, 43, 18, 19],
                            [73, 102, 182, 2.787, 44, 19, 20],
                            [73, 50, 76, 0.717, 31, 20, 21],
                            [84, 94, 140, 2.238, 68, 18, 22],
                            [93, 77, 104, 1.165, 53, 7, 23],
                            [99, 130, 227, 3.97, 55, 15, 24],
                            [146, 84, 139, 1.094, 40, 17, 25],
                            [113, 108, 137, 1.481, 48, 15, 26],
                            [81, 48, 62, 1.619, 26, 3, 27],
                            [56, 48, 68, 1.336, 37, 9, 28],
                            [82, 92, 174, 3.29, 0, 13, 29],
                            [106, 116, 188, 3.628, 101, 16, 30],
                            [118, 50, 0, 1.383, 76, 11, 31]
                        ];

                        var dataSH = [
                            [91, 45, 125, 0.82, 34, 23, 1],
                            [65, 27, 78, 0.86, 45, 29, 2],
                            [83, 60, 84, 1.09, 73, 27, 3],
                            [109, 81, 121, 1.28, 68, 51, 4],
                            [106, 77, 114, 1.07, 55, 51, 5],
                            [109, 81, 121, 1.28, 68, 51, 6],
                            [106, 77, 114, 1.07, 55, 51, 7],
                            [89, 65, 78, 0.86, 51, 26, 8],
                            [53, 33, 47, 0.64, 50, 17, 9],
                            [80, 55, 80, 1.01, 75, 24, 10],
                            [117, 81, 124, 1.03, 45, 24, 11],
                            [99, 71, 142, 1.1, 62, 42, 12],
                            [95, 69, 130, 1.28, 74, 50, 13],
                            [116, 87, 131, 1.47, 84, 40, 14],
                            [108, 80, 121, 1.3, 85, 37, 15],
                            [134, 83, 167, 1.16, 57, 43, 16],
                            [79, 43, 107, 1.05, 59, 37, 17],
                            [71, 46, 89, 0.86, 64, 25, 18],
                            [97, 71, 113, 1.17, 88, 31, 19],
                            [84, 57, 91, 0.85, 55, 31, 20],
                            [87, 63, 101, 0.9, 56, 41, 21],
                            [104, 77, 119, 1.09, 73, 48, 22],
                            [87, 62, 100, 1, 72, 28, 23],
                            [168, 128, 172, 1.49, 97, 56, 24],
                            [65, 45, 51, 0.74, 39, 17, 25],
                            [39, 24, 38, 0.61, 47, 17, 26],
                            [39, 24, 39, 0.59, 50, 19, 27],
                            [93, 68, 96, 1.05, 79, 29, 28],
                            [188, 143, 197, 1.66, 99, 51, 29],
                            [174, 131, 174, 1.55, 108, 50, 30],
                            [187, 143, 201, 1.39, 89, 53, 31]
                        ];

                        var lineStyle = {
                            normal: {
                                width: 1,
                                opacity: 0.5
                            }
                        };

                        option = {

                            title: {
                                text: '',

                            },
                            legend: {
                                bottom: 5,
                                data: ['1号', '2号', '3号'],
                                itemGap: 20,
                                textStyle: {
                                    color: '#fff',
                                    fontSize: 8
                                },
                                selectedMode: 'single'
                            },
                            // visualMap: {
                            //     show: true,
                            //     min: 0,
                            //     max: 20,
                            //     dimension: 6,
                            //     inRange: {
                            //         colorLightness: [0.5, 0.8]
                            //     }
                            // },
                            radar: {
                                indicator: [
                                    { name: 'AQI', max: 300 },
                                    { name: 'PM2.5', max: 250 },
                                    { name: 'PM10', max: 300 },
                                    { name: 'CO', max: 5 },
                                    { name: 'NO2', max: 200 },
                                    { name: 'SO2', max: 100 }
                                ],
                                shape: 'circle',
                                splitNumber: 5,
                                name: {
                                    textStyle: {
                                        color: '#1481fc',
                                        fontSize: 9
                                    }
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: [
                                            'rgba(238, 197, 102, 0.1)', 'rgba(238, 197, 102, 0.2)',
                                            'rgba(238, 197, 102, 0.4)', 'rgba(238, 197, 102, 0.6)',
                                            'rgba(238, 197, 102, 0.8)', 'rgba(238, 197, 102, 1)'
                                        ].reverse()
                                    }
                                },
                                splitArea: {
                                    show: false
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'rgba(238, 197, 102, 0.5)'
                                    }
                                }
                            },
                            series: [
                                {
                                    name: '1号',
                                    type: 'radar',
                                    lineStyle: lineStyle,
                                    data: dataBJ,
                                    symbol: 'none',
                                    itemStyle: {
                                        color: '#1481fc'
                                    },
                                    areaStyle: {
                                        opacity: 0.1
                                    }
                                },
                                {
                                    name: '2号',
                                    type: 'radar',
                                    lineStyle: lineStyle,
                                    data: dataSH,
                                    symbol: 'none',
                                    itemStyle: {
                                        color: '#B3E4A1'
                                    },
                                    areaStyle: {
                                        opacity: 0.05
                                    }
                                },
                                {
                                    name: '3号',
                                    type: 'radar',
                                    lineStyle: lineStyle,
                                    data: dataGZ,
                                    symbol: 'none',
                                    itemStyle: {
                                        color: 'rgb(238, 197, 102)'
                                    },
                                    areaStyle: {
                                        opacity: 0.05
                                    }
                                }
                            ]
                        };

                        myChart.setOption(option);
                    }
            function myfun2() {



                        var chartDom = document.getElementById('main2');
                        var myChart = echarts.init(chartDom);
                        var option;

                        option = {

                            color: ['#80FFA5', '#00DDFF', '#37A2FF', '#FF0087', '#FFBF00'],
                            title: {
                                text: ' ',
                                left: 'center',
                                textStyle: {
                                    color: '#eee',
                                    fontSize: '14',

                                }
                            },
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'cross',
                                    label: {
                                        backgroundColor: '#6a7985'
                                    }
                                }
                            },
                            // legend: {
                            //     data: ['Line 1', 'Line 2', 'Line 3', 'Line 4', 'Line 5']
                            // },
                            toolbox: {
                                feature: {
                                    saveAsImage: {}
                                }
                            },
                            grid: {
                                left: '3%',
                                right: '4%',
                                bottom: '3%',
                                containLabel: false
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],

                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',

                                }
                            ],
                            series: [
                                {
                                    name: '抽烟',
                                    type: 'line',
                                    stack: '总量',
                                    smooth: true,
                                    lineStyle: {
                                        width: 0
                                    },
                                    showSymbol: false,
                                    areaStyle: {
                                        opacity: 0.8,
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(128, 255, 165)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(1, 191, 236)'
                                        }])
                                    },
                                    emphasis: {
                                        focus: 'series'
                                    },
                                    data: [1, 3, 5, 2, 6, 3, 4]
                                },
                                {
                                    name: '安全带',
                                    type: 'line',
                                    stack: '总量',
                                    smooth: true,
                                    lineStyle: {
                                        width: 0
                                    },
                                    showSymbol: false,
                                    areaStyle: {
                                        opacity: 0.8,
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(0, 221, 255)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(77, 119, 255)'
                                        }])
                                    },
                                    emphasis: {
                                        focus: 'series'
                                    },
                                    data: [5, 8, 1, 3, 6, 3, 5]
                                },
                                {
                                    name: ' 安全帽',
                                    type: 'line',
                                    stack: '总量',
                                    smooth: true,
                                    lineStyle: {
                                        width: 0
                                    },
                                    showSymbol: false,
                                    areaStyle: {
                                        opacity: 0.8,
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(55, 162, 255)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(116, 21, 219)'
                                        }])
                                    },
                                    emphasis: {
                                        focus: 'series'
                                    },
                                    data: [4, 1, 2, 2, 1, 2, 1]
                                },
                                {
                                    name: ' 高支模',
                                    type: 'line',
                                    stack: '总量',
                                    smooth: true,
                                    lineStyle: {
                                        width: 0
                                    },
                                    showSymbol: false,
                                    areaStyle: {
                                        opacity: 0.8,
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(255, 0, 135)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(135, 0, 157)'
                                        }])
                                    },
                                    emphasis: {
                                        focus: 'series'
                                    },
                                    data: [0, 0, 1, 0, 1, 0, 1]
                                },
                                {
                                    name: '闯入',
                                    type: 'line',
                                    stack: '总量',
                                    smooth: true,
                                    lineStyle: {
                                        width: 0
                                    },
                                    showSymbol: false,
                                    label: {
                                        show: true,
                                        position: 'top'
                                    },
                                    areaStyle: {
                                        opacity: 0.4,
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 0.5, [{
                                            offset: 0,
                                            color: 'rgba(255, 191, 0)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(224, 62, 76)'
                                        }])
                                    },
                                    emphasis: {
                                        focus: 'series'
                                    },
                                    data: [3, 1, 2, 4, 2, 1, 0]
                                }
                            ]
                        };

                        myChart.setOption(option);


                    }
            function myfun3() {
                        var myChart = echarts.init(document.getElementById('main3'));
                        option = {
                            tooltip: {
                                trigger: 'item',
                                formatter: "{b} : {c} ({d}%)"
                            },
                            legend: {
                                right: 10,
                                top: 30,
                                height: 140,
                                itemWidth: 10,
                                itemHeight: 10,
                                itemGap: 10,
                                textStyle: {
                                    color: 'rgba(255,255,255,.6)',
                                    fontSize: 12
                                },
                                orient: 'vertical',
                                data: ['抽烟', '违规动火', '安全带', '安全帽']
                            },
                            calculable: true,
                            series: [
                                {
                                    name: ' ',
                                    color: ['#62c98d', '#2f89cf', '#4cb9cf', '#53b666', '#62c98d', '#205acf', '#c9c862', '#c98b62', '#c962b9', '#7562c9', '#c96262'],
                                    type: 'pie',
                                    radius: [30, 70],
                                    center: ['35%', '50%'],
                                    roseType: 'radius',
                                    label: {
                                        normal: {
                                            show: true
                                        },
                                        emphasis: {
                                            show: true
                                        }
                                    },

                                    lableLine: {
                                        normal: {
                                            show: true
                                        },
                                        emphasis: {
                                            show: false
                                        }
                                    },

                                    data: [
                                        { value: 10, name: '抽烟' },
                                        { value: 15, name: '违规动火' },
                                        { value: 25, name: '安全带' },
                                        { value: 30, name: '安全帽' }
                                    ]
                                },
                            ]
                        };

                        // 使用刚指定的配置项和数据显示图表。
                        myChart.setOption(option);
                    }

            function zb1() {
                        // 基于准备好的dom，初始化echarts实例
                        var myChart = echarts.init(document.getElementById('zb1'));
                        var v1 = 90//结算数
                        var v2 = 10//未结算数
                        var v3 = v1 + v2//总订单数
                        option = {
                            series: [{
                                type: 'pie',
                                radius: ['60%', '70%'],
                                color: '#49bcf7',
                                label: {
                                    normal: {
                                        position: 'center'
                                    }
                                },
                                data: [{
                                    value: v1,
                                    name: '数量结算率',
                                    label: {
                                        normal: {
                                            formatter: Math.round(v1 + 6) + '分',
                                            textStyle: {
                                                fontSize: 20,
                                                color: '#fff',
                                            }
                                        }
                                    }
                                },
                                {
                                    value: v2,
                                    label: {
                                        normal: {
                                            formatter: function (params) {
                                                return ''
                                            },
                                            textStyle: {
                                                color: '#aaa',
                                                fontSize: 16,

                                            }
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: 'rgba(255,255,255,.2)'
                                        },
                                        emphasis: {
                                            color: '#fff'
                                        }
                                    },
                                }]
                            }]
                        };
                        myChart.setOption(option);

                    }
            function zb2() {
                        // 基于准备好的dom，初始化echarts实例
                        var myChart = echarts.init(document.getElementById('zb2'));
                        var v1 = 80//结算数
                        var v2 = 20//未结算数
                        var v3 = v1 + v2//总订单数
                        option = {

                            //animation: false,
                            series: [{
                                type: 'pie',
                                radius: ['60%', '70%'],
                                color: '#62c98d',
                                label: {
                                    normal: {
                                        position: 'center'
                                    }
                                },
                                data: [{
                                    value: v1,
                                    name: '数量结算率',
                                    label: {
                                        normal: {
                                            formatter: Math.round(v1 / v3 * 100) + '%',
                                            textStyle: {
                                                fontSize: 24,
                                                color: '#fff',
                                            }
                                        }
                                    }
                                }, {
                                    value: v2,
                                    label: {
                                        normal: {
                                            formatter: function (params) {
                                                return ''
                                            },
                                            textStyle: {
                                                color: '#aaa',
                                                fontSize: 16
                                            }
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: 'rgba(255,255,255,.2)'
                                        },
                                        emphasis: {
                                            color: '#fff'
                                        }
                                    },
                                }]
                            }]
                        };
                        myChart.setOption(option);

                    }

            function animate() {

                        requestAnimationFrame(animate);

                        var delta = clock.getDelta();
                           scene.rotation.y+= 0.001;
                          
                           spritxex
                        if (mixer) mixer.update(delta);
                        // if (mixer2) mixer2.update(delta);
                        renderer.render(scene, camera);

                        // stats.update();
                        composer.render();
                        // composer2.render();
                    }

        </script>

</body>

</html>